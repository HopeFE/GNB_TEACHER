webpackJsonp([38],{mLGK:function(t,e,o){"use strict";function a(t){o("pNfa")}Object.defineProperty(e,"__esModule",{value:!0});var n=o("Xxa5"),s=o.n(n),i=o("exGp"),r=o.n(i),l=o("Dd8w"),c=o.n(l),d=o("ABCa"),p=o("1sNz"),u=o("dQSc"),f=o("jOlP"),h=o("YxJB"),w=o("3Lt7"),x=o("rHil"),b=o("7Ah8"),v=o("UIMx"),_=o("dgEa"),m=o("NYxO"),g=o("xJtg"),k={name:"index",components:{XHeader:d.a,ViewBox:p.a,Card:u.a,Spinner:f.a,Flexbox:h.a,FlexboxItem:w.a,Group:x.a,PopupPicker:b.a,Tabbar:v.a,TabbarItem:_.a,Share:g.a},computed:c()({},Object(m.mapGetters)(["DownloadPaper","DownloadUrl","User"]),{block:function(){return this.DownloadPaper.list.block||[]},downloadId:function(){return this.DownloadPaper.list.downloadId}}),data:function(){return{showPopupPicker:!1,loading:!0,error:!1,showAction:!1,share:{content:"试卷分享",title:"我的组卷"}}},methods:c()({},Object(m.mapActions)(["getDownloadList","getDownloadUrl","setMyDownloadPaperScroll","clearMyDownloadPaper","getDownloadVaild","clearAssembleExample","clearAssembleChoice"]),{_getData:function(){var t=this;this.clearMyDownloadPaper(),this.loading=!0,this.getDownloadList().then(function(){t.error=!1,t.loading=!1}).catch(function(e){t.error=!0,t.loading=!1})},_download:function(){var t=this;return r()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDownloadVaild();case 3:t.showAction=!0,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.showAction=!1;case 9:case"end":return e.stop()}},e,t,[[0,6]])}))()},_shareSuccess:function(){this._getData(),this.clearAssembleExample(),this.$router.go(-1)}}),beforeRouteEnter:function(t,e,o){o(function(t){"example"!==e.name&&t._getData(),t.$refs.download.scrollTo(t.DownloadPaper.scroll)})},beforeRouteLeave:function(t,e,o){this.showAction?(this.showPopupPicker=!1,o(!1)):(this.setMyDownloadPaperScroll(this.$refs.download.getScrollTop()),o())}},y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view-box",{ref:"download",attrs:{"body-padding-top":"46px"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header","left-options":{backText:"下载"}},slot:"header"}),t._v(" "),o("div",{attrs:{slot:"default"},slot:"default"},[t._l(t.block,function(e,a){return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],key:a},[o("div",{staticClass:"weui-cells__title"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.list,function(e,a){return o("card",{key:a},[o("div",{attrs:{slot:"content"},on:{click:function(t){this.$router.push({name:"example",params:{subjectId:e.subject_id,grade:e.grade,id:e.exercisesId,type:1===e.form?"exercises":"lxexercises"}})}},slot:"content"},[o("div",{domProps:{innerHTML:t._s(e.stem)}}),t._v(" "),t._l(e.opt,function(e,a){return o("div",{key:a,staticStyle:{"padding-top":"5px"}},[t._v("\n            "+t._s(a)+"："),o("p",{staticStyle:{display:"inline-block"},domProps:{innerHTML:t._s(e)}})])})],2),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"weui-cell weui-cell_link"},[o("div",{staticClass:"weui-cell__bd"},[o("flexbox",{attrs:{gutter:0}},[o("flexbox-item",{attrs:{span:3}},[t._v("难度："+t._s(e.degree))]),t._v(" "),o("flexbox-item",{attrs:{span:7}},[t._v("时间："+t._s(t._f("ymd")(e.time)))])],1)],1)])])])})],2)}),t._v(" "),o("div",{staticStyle:{"text-align":"center",padding:"10px 0"}},[t.loading?o("spinner",{attrs:{type:"lines"}}):t.block.length?t.error?o("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"},on:{click:function(e){t._getData()}}},[t._v("出错了点我重新加载")]):t._e():o("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"}},[t._v("该科目还未组卷")])],1),t._v(" "),o("share",{attrs:{change:t.showAction,showAction:t.showAction,content:t.share.content,title:t.share.title,href:"http://www.guinaben.com/upload/assembly/"+t.downloadId+".pdf"},on:{"update:change":function(e){t.showAction=e},"on-share-success":function(e){t._shareSuccess()}}})],2),t._v(" "),o("tabbar",{directives:[{name:"show",rawName:"v-show",value:t.block&&t.block.length,expression:"block && block.length"}],staticStyle:{"background-color":"#4cc0be",color:"#fff"},attrs:{slot:"bottom"},slot:"bottom"},[o("flexbox",{staticStyle:{padding:".3rem"}},[o("flexbox-item",{staticStyle:{"font-size":".8rem","text-align":"center"},attrs:{span:6},nativeOn:{click:function(e){t.$router.push({name:"download_update",params:{id:t.downloadId}})}}},[o("i",{staticClass:"icon iconfont icon-bianji"}),t._v("编辑")]),t._v(" "),o("flexbox-item",{staticStyle:{"font-size":".8rem","text-align":"center"},attrs:{span:6},nativeOn:{click:function(e){t._download()}}},[o("i",{staticClass:"icon iconfont icon-download"}),t._v("下载")])],1)],1)],1)},D=[],P={render:y,staticRenderFns:D},S=P,A=o("VU/8"),j=a,I=A(k,S,!1,j,"data-v-6e7cf28e",null);e.default=I.exports},pNfa:function(t,e,o){var a=o("v5dl");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("rjj0")("56baea7c",a,!0)},v5dl:function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,"\n.popup .vux-cell-box[data-v-6e7cf28e]:before{\r\n  border-top:0px !important;\n}\r\n",""])}});