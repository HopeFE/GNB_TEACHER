webpackJsonp([31],{M9qo:function(t,e,o){var n=o("rWys");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o("rjj0")("38bfc19c",n,!0)},rWys:function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,"\n.vux-header-title .vux-cell-box:before{\r\n  border-top:none !important;\n}\r\n",""])},utyQ:function(t,e,o){"use strict";function n(t){o("M9qo")}Object.defineProperty(e,"__esModule",{value:!0});var i=o("Dd8w"),a=o.n(i),s=o("2sLL"),r=o("ABCa"),c=o("1sNz"),l=o("rHil"),p=o("1DHf"),h=o("7Ah8"),u=o("jOlP"),d=o("NYxO"),f=o("xJtg"),w={name:"Paper",components:{XButton:s.a,XHeader:r.a,ViewBox:c.a,Group:l.a,Cell:p.a,PopupPicker:h.a,Spinner:u.a,Share:f.a},computed:a()({},Object(d.mapGetters)(["MyDownloadPaper"]),{grade:function(){switch(this.options[0]){case"初中":return"789";case"高中":return"10"}},subject:function(){switch(this.options[1]){case"数学":return"math";case"物理":return"physics"}}}),data:function(){return{options:["高中","数学"],showPopupPicker:!1,loading:!0,error:!1,showAction:!1,share:{content:"",title:"我的试卷下载",href:""}}},methods:a()({},Object(d.mapActions)(["getMyDownloadPaper","clearMyDownload"]),{_download:function(t){this.share.href=t.url,this.share.content=t.name,this.showAction=!0},_getData:function(){var t=this;this.clearMyDownload({type:"paper"}),this.loading=!0,this.getMyDownloadPaper({options:{grade:this.grade,subject:this.subject}}).then(function(){t.error=!1,t.loading=!1}).catch(function(e){t.error=!0,t.loading=!1})}}),watch:{options:function(){this.showPopupPicker=!1,this._getData()}},beforeRouteEnter:function(t,e,o){o(function(t){"myDownloadPaper_Search"!==e.name&&t._getData()})},beforeRouteLeave:function(t,e,o){this.showAction?(this.showAction=!1,o(!1)):this.showPopupPicker?(this.showPopupPicker=!1,o(!1)):o()}},g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view-box",{attrs:{"body-padding-top":"46px"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header","left-options":{backText:"试卷下载"}},slot:"header"},[o("div",{attrs:{slot:"right"},on:{click:function(e){t.showPopupPicker=!0}},slot:"right"},[t._v("筛选")]),t._v(" "),o("div",{staticClass:"popup"},[o("popup-picker",{attrs:{show:t.showPopupPicker,"confirm-text":"确定","show-cell":!1,data:[["初中","高中"],["数学"]]},on:{"on-hide":function(e){t.showPopupPicker=!1}},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1)]),t._v(" "),o("div",[o("group",{directives:[{name:"show",rawName:"v-show",value:t.MyDownloadPaper.list.length,expression:"MyDownloadPaper.list.length"}],attrs:{gutter:0,title:"只展示最近一个月的试卷"}},t._l(t.MyDownloadPaper.list,function(e,n){return o("cell",{key:n,attrs:{title:e.name}},[o("div",{staticStyle:{color:"#4cc0be"}},[o("span",{staticStyle:{padding:"0 5px","line-height":"24px"},on:{click:function(o){t._download(e)}}},[o("i",{staticClass:"icon iconfont icon-download",staticStyle:{"font-size":"16px"}}),t._v("下载\n          ")])])])})),t._v(" "),o("div",{staticStyle:{"text-align":"center",padding:"10px 0"}},[t.loading?o("spinner",{attrs:{type:"lines"}}):t.MyDownloadPaper.list.length?t.error?o("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"},on:{click:function(e){t._getData()}}},[t._v("出错了点我重新加载")]):t._e():o("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"}},[t._v("近一月还未有下载记录")])],1)],1),t._v(" "),o("share",{attrs:{change:t.showAction,showAction:t.showAction,content:t.share.content,title:t.share.title,href:t.share.href},on:{"update:change":function(e){t.showAction=e}}})],1)},y=[],P={render:g,staticRenderFns:y},v=P,x=o("VU/8"),b=n,_=x(w,v,!1,b,null,null);e.default=_.exports}});