webpackJsonp([91],{GVFb:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};o.d(n,"ErrorclassChapter",function(){return f}),o.d(n,"ErrorclassChapterOptions",function(){return T}),o.d(n,"ErrorclassRemember",function(){return C}),o.d(n,"ErrorclassGood",function(){return b}),o.d(n,"ErrorclassCamera",function(){return x});var a={};o.d(a,"getStatisticsChapter",function(){return g}),o.d(a,"clearStatisticsChapter",function(){return _}),o.d(a,"getStatisticsOptionsTextbook",function(){return O}),o.d(a,"getStatisticsChapterOptions",function(){return y}),o.d(a,"setStatisticsChapterOptions",function(){return k}),o.d(a,"getStatisticsRemember",function(){return w}),o.d(a,"getStatisticsRememberAssemble",function(){return R}),o.d(a,"setStatisticsRememberAssembleUpdate",function(){return v}),o.d(a,"setStatisticsRememberOptions",function(){return M}),o.d(a,"getStatisticsCamera",function(){return j}),o.d(a,"getStatisticsCameraAssemble",function(){return B}),o.d(a,"setStatisticsCameraAssembleUpdate",function(){return L}),o.d(a,"getStatisticsGood",function(){return D}),o.d(a,"getStatisticsGoodAssemble",function(){return P}),o.d(a,"setStatisticsGoodOptions",function(){return $}),o.d(a,"setStatisticsGoodAssembleUpdate",function(){return G}),o.d(a,"setStatisticsGoodAssembleList",function(){return N}),o.d(a,"setStatisticsGoodAssembleOrder",function(){return U}),o.d(a,"setStatisticsScroll",function(){return H}),o.d(a,"clearStatisticsAssemble",function(){return F}),o.d(a,"clearStatisticsDownload",function(){return V}),o.d(a,"getStatisticsAssemblUrl",function(){return W}),o.d(a,"getStatisticsComment",function(){return X});var s,r=o("Dd8w"),i=o.n(r),d=o("ABCa"),c=o("1DHf"),u=o("rHil"),m=o("1sNz"),l=o("NYxO"),S=o("bOdI"),p=o.n(S),f=function(t){return t.chapter},T=function(t){return t.chapter.options},C=function(t){return t.remember},b=function(t){return t.good},x=function(t){return t.camera},h=o("//Fk"),I=o.n(h),E=o("YEn3"),A=o("7+uW"),g=function(t){var e=t.state,o=t.rootState,n=t.commit;return new I.a(function(t,a){Object(E.a)({method:"get",url:"errorClass/chapter",params:{token:o.common.user.token,textbookId:e.chapter.options.textbookId}}).then(function(e){n("STATISTICS_CHAPTER",{data:e.data.data}),t(e)}).catch(function(t){a(t)})})},_=function(t){t.state,t.rootState;(0,t.commit)("STATISTICS_CHAPTER_RESET")},O=function(t){var e=t.rootState,o=t.commit;return new I.a(function(t,n){Object(E.a)({method:"get",url:"download/textbook",params:{token:e.common.user.token}}).then(function(e){o("STATISTICS_TEXTBOOKLIST",e.data.data),t(e)}).catch(function(t){n(t)})})},y=function(t,e){var o=t.rootState,n=t.commit;return new I.a(function(t,a){Object(E.a)({method:"get",url:"errorClass/options",params:{token:o.common.user.token,classCode:e.classCode}}).then(function(e){n("STATISTICS_CHAPTER_OPTIONS",e.data.data),t(e)}).catch(function(t){a(t)})})},k=function(t,e){var o=t.rootState,n=t.commit;return new I.a(function(t,a){Object(E.a)({method:"get",url:" errorClass/addOptions",params:{options:{classCode:o.route.params.classCode,grade:e.grade,subject:e.subject,textbookId:e.textbookId},token:o.common.user.token}}).then(function(e){n("STATISTICS_SET_CHAPTER_OPTIONS",e.data.data),t(e)}).catch(function(t){a(t)})})},w=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return new I.a(function(t,e){Object(E.a)({method:"get",url:"errorClass/remember/list",params:{token:n.common.user.token,offset:o.remember.index.offset,options:{classCode:n.route.params.classCode,chapterId:n.route.params.chapterId,qType:o.remember.index.options.type,degree:o.remember.index.options.degree}}}).then(function(e){a("STATISTICS_REMEMBER",{data:e.data.data}),t(e)})})},R=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return new I.a(function(t,e){Object(E.a)({method:"get",url:"errorClass/remember/assemble",params:{token:n.common.user.token,options:{classCode:n.route.params.classCode,subject:o.chapter.options.subject}}}).then(function(e){a("STATISTICS_REMEMBER_ASSEMBLE",{data:e.data.data}),t(e)})})},v=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return A.default.$vux.loading.show({text:"请稍候"}),new I.a(function(t,s){Object(E.a)({method:"post",url:"errorClass/remember/assemble/update",data:{token:n.common.user.token,options:{classCode:n.route.params.classCode,subject:o.chapter.options.subject},id:e.id}}).then(function(o){A.default.$vux.loading.hide(),A.default.$vux.toast.show({text:o.data.msg,type:"text",time:1e3,position:"bottom"}),a("STATISTICS_REMEMBER_ASSEMBLE_UPDATE",{index:e.index,data:o.data.data}),t(o)}).catch(function(t){A.default.$vux.loading.hide(),s(t)})})},M=function(t,e){var o=t.commit;o("STATISTICS_ASSEMBLE_RESET",{type:"remember"}),o("STATISTICS_REMEMBER_OPTIONS",{degree:e.degree,type:e.type})},j=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return new I.a(function(t,e){Object(E.a)({method:"get",url:"errorClass/camera/list",params:{token:n.common.user.token,offset:o.camera.index.offset,options:{classCode:n.route.params.classCode,chapterId:n.route.params.chapterId}}}).then(function(e){a("STATISTICS_CAMERA",{data:e.data.data}),t(e)})})},B=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return new I.a(function(t,e){Object(E.a)({method:"get",url:"errorClass/camera/assemble",params:{token:n.common.user.token,options:{classCode:n.route.params.classCode,subject:o.chapter.options.subject}}}).then(function(e){a("STATISTICS_CAMERA_ASSEMBLE",{data:e.data.data}),t(e)})})},L=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return A.default.$vux.loading.show({text:"请稍候"}),new I.a(function(t,s){Object(E.a)({method:"post",url:"errorClass/camera/assemble/update",data:{token:n.common.user.token,id:e.id,options:{classCode:n.route.params.classCode,subject:o.chapter.options.subject}}}).then(function(o){A.default.$vux.loading.hide(),a("STATISTICS_CAMERA_ASSEMBLE_UPDATE",{data:o.data.data,index:e.index}),A.default.$vux.toast.show({text:o.data.msg,type:"text",time:1e3,position:"bottom"}),t(o)}).catch(function(t){A.default.$vux.loading.hide(),s(t)})})},D=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return new I.a(function(t,e){Object(E.a)({method:"get",url:"errorClass/good/list",params:{token:n.common.user.token,offset:o.good.index.offset,options:{classCode:n.route.params.classCode,chapterId:n.route.params.chapterId,type:o.good.index.options.type,degree:o.good.index.options.degree}}}).then(function(e){a("STATISTICS_GOOD",{data:e.data.data}),t(e)})})},P=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return new I.a(function(t,e){Object(E.a)({method:"get",url:"errorClass/good/assemble",params:{token:n.common.user.token,options:{classCode:n.route.params.classCode,subject:o.chapter.options.subject}}}).then(function(e){a("STATISTICS_GOOD_ASSEMBLE",{data:e.data.data}),t(e)})})},$=function(t,e){var o=t.commit;o("STATISTICS_ASSEMBLE_RESET",{type:"good"}),o("STATISTICS_GOOD_OPTIONS",{type:e.type,degree:e.degree})},G=function(t,e){var o=t.state,n=t.rootState,a=t.commit;return A.default.$vux.loading.show({text:"请稍候"}),new I.a(function(t,s){Object(E.a)({method:"post",url:"errorClass/good/assemble/update",data:{token:n.common.user.token,id:e.id,options:{classCode:n.route.params.classCode,form:e.from,subject:o.chapter.options.subject}}}).then(function(o){A.default.$vux.loading.hide(),a("STATISTICS_GOOD_ASSEMBLE_UPDATE",{from:e.from,index:e.index,data:o.data.data}),A.default.$vux.toast.show({text:o.data.msg,type:"text",time:1e3,position:"bottom"}),t(o)})})},N=function(t,e){for(var o=t.state,n=t.rootState,a=(t.commit,[]),s=o.good.download,r=0;r<s.length;r++)for(var i=0;i<s[r].list.length;i++)a.push({id:s[r].list[i].exercisesId,form:s[r].list[i].form});return A.default.$vux.loading.show({text:"请稍候"}),new I.a(function(t,e){Object(E.a)({method:"post",url:"errorClass/good/assemble/order",data:{token:n.common.user.token,options:{classCode:n.route.params.classCode},ids:a}}).then(function(e){A.default.$vux.loading.hide(),t(e)}).catch(function(t){A.default.$vux.loading.hide(),e(t)})})},U=function(t,e){var o=t.state,n=t.commit;0===e.index&&"up"===e.type?A.default.$vux.toast.show({text:"不能再上移了",type:"text",time:1e3,position:"bottom"}):e.index===o.good.download[e.pindex].list.length-1&&"down"===e.type?A.default.$vux.toast.show({text:"不能再下移了",type:"text",time:1e3,position:"bottom"}):n("STATISTICS_GOOD_ASSEMBLE_ORDER",{type:e.type,index:e.index,pindex:e.pindex})},H=function(t,e){(0,t.commit)("STATISTICS_SCROLL",{type:e.type,height:e.height})},F=function(t,e){(0,t.commit)("STATISTICS_ASSEMBLE_RESET",{type:e.type})},V=function(t,e){(0,t.commit)("STATISTICS_ASSEMBLE_DOWNLOAD_RESET",{type:e.type})},W=function(t,e){var o=t.rootState,n=t.commit;return new I.a(function(t,a){Object(E.a)({method:"post",url:"errorClass/assemble/download",data:{token:o.common.user.token,options:{classCode:o.route.params.classCode},type:e.type}}).then(function(o){n("STATISTICS_ASSEMBLE_RESET",{type:e.type}),t(o)})})},X=function(t,e){var o=t.rootState,n=t.commit;return A.default.$vux.loading.show({text:"请稍候"}),new I.a(function(t,a){Object(E.a)({method:"post",url:"comment",data:{token:o.common.user.token,chapterId:e.chapterId,type:e.type,errorComment:e.errorComment,id:e.id}}).then(function(o){A.default.$vux.loading.hide(),n("STATISTICS_COMMENT",{type:e.type,errorComment:e.errorComment,index:e.index}),t(o)}).catch(function(t){A.default.$vux.loading.hide(),a(t)})})},z={chapter:{options:{textbookId:"",subject:"",grade:"",textbookList:[]},list:[]},remember:{index:{options:{degree:0,type:0},scroll:0,list:[],offset:"",reset:!0},download:[],count:0},camera:{index:{list:[],scroll:0,offset:"",reset:!0},download:[],count:0},good:{index:{options:{degree:0,type:0},scroll:0,list:[],reset:!0,offset:""},similarity:{list:[],offset:""},download:[],count:0}},K=z,Y=(s={},p()(s,"STATISTICS_CHAPTER",function(t,e){t.chapter.list=e.data}),p()(s,"STATISTICS_CHAPTER_RESET",function(t){t.chapter.list=[]}),p()(s,"STATISTICS_CHAPTER_OPTIONS",function(t,e){t.chapter.options.textbookId=e.textbookId,t.chapter.options.subject=e.subject,t.chapter.options.grade=e.grade}),p()(s,"STATISTICS_SET_CHAPTER_OPTIONS",function(t,e){t.chapter.options.textbookId=e.textbookId,t.chapter.options.subject=e.subject,t.chapter.options.grade=e.grade}),p()(s,"STATISTICS_TEXTBOOKLIST",function(t,e){t.chapter.options.textbookList=e}),p()(s,"STATISTICS_REMEMBER",function(t,e){t.remember.count=e.data.count,0!==e.data.list.length&&(t.remember.index.reset=!1,t.remember.index.list=t.remember.index.list?t.remember.index.list.concat(e.data.list):e.data.list,t.remember.index.offset=e.data.offset)}),p()(s,"STATISTICS_REMEMBER_OPTIONS",function(t,e){t.remember.index.options={degree:e.degree,type:e.type},t.remember.index.reset=!0}),p()(s,"STATISTICS_REMEMBER_ASSEMBLE",function(t,e){t.remember.download=e.data.list,t.remember.count=e.data.count}),p()(s,"STATISTICS_REMEMBER_ASSEMBLE_UPDATE",function(t,e){t.remember.index.list[e.index].isAssembly=e.data.isAssembly,e.data.isAssembly?++t.remember.count:--t.remember.count}),p()(s,"STATISTICS_CAMERA",function(t,e){t.camera.count=e.data.count,0!==e.data.list.length&&(t.camera.index.reset=!1,t.camera.index.list=t.camera.index.list?t.camera.index.list.concat(e.data.list):e.data.list,t.camera.index.offset=e.data.offset)}),p()(s,"STATISTICS_CAMERA_ASSEMBLE",function(t,e){t.camera.download=e.data.list,t.camera.count=e.data.count}),p()(s,"STATISTICS_CAMERA_ASSEMBLE_UPDATE",function(t,e){t.camera.index.list[e.index].isAssembly=e.data.isAssembly,e.data.isAssembly?++t.camera.count:--t.camera.count}),p()(s,"STATISTICS_GOOD",function(t,e){t.good.count=e.data.count,0!==e.data.list.length&&(t.good.index.list=t.good.index.list?t.good.index.list.concat(e.data.list):e.data.list,t.good.index.offset=e.data.offset,t.good.index.reset=!1)}),p()(s,"STATISTICS_GOOD_OPTIONS",function(t,e){t.good.index.options={degree:e.degree,type:e.type},t.good.index.reset=!0}),p()(s,"STATISTICS_GOOD_ASSEMBLE",function(t,e){t.good.download=e.data.block,t.good.count=e.data.count}),p()(s,"STATISTICS_GOOD_ASSEMBLE_UPDATE",function(t,e){t.good.index.list[e.index].isAssembly=e.data.isAssembly,e.data.isAssembly?++t.good.count:--t.good.count}),p()(s,"STATISTICS_GOOD_ASSEMBLE_ORDER",function(t,e){var o=t.good.download[e.pindex].list;"up"===e.type?o[e.index]=o.splice(e.index-1,1,o[e.index])[0]:"down"===e.type?o[e.index]=o.splice(e.index+1,1,o[e.index])[0]:o.splice(e.index,1)}),p()(s,"STATISTICS_SCROLL",function(t,e){t[e.type].index.scroll=e.height}),p()(s,"STATISTICS_COMMENT",function(t,e){t[e.type].index.list[e.index].errorComment=e.errorComment}),p()(s,"STATISTICS_ASSEMBLE_DOWNLOAD_RESET",function(t,e){switch(e.type){case"camera":t.camera.download=[],t.camera.index.reset=!1;break;case"remember":t.remember.download=[],t.remember.index.reset=!1;break;case"good":t.good.download=[],t.good.index.reset=!1}}),p()(s,"STATISTICS_ASSEMBLE_RESET",function(t,e){switch(e.type){case"camera":t.camera={index:{list:[],scroll:0,offset:"",reset:!0},download:[],count:0};break;case"remember":t.remember={index:{options:{degree:0,type:0},scroll:0,list:[],offset:"",reset:!0},download:[],count:0};break;case"good":t.good={index:{options:{type:0,degree:0},scroll:0,list:[],offset:"",reset:!0},download:[],count:0}}}),s),q={state:K,mutations:Y,getters:n,actions:a},J=o("olkN"),Q={name:"class",components:{XHeader:d.a,Cell:c.a,Group:u.a,ViewBox:m.a},computed:i()({},Object(l.mapGetters)(["User"])),methods:i()({},Object(l.mapActions)(["getStatisticsChapterOptions"]),{_intoPage:function(t){var e=this;this.getStatisticsChapterOptions({classCode:t.classCode}).then(function(o){o.data.data.textbookId.length?e.$router.push({name:"errorClassChapter",params:{name:t.name,classCode:t.classCode}}):e.$router.push({name:"errorClassOptions",params:{name:t.name,classCode:t.classCode}})})}}),beforeCreate:function(){J.a.registerModule(["statistics","classes"],i()({},q))}},Z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view-box",{ref:"statistics",attrs:{"body-padding-top":"46px"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header","left-options":{backText:"错题归纳"}},slot:"header"}),t._v(" "),o("group",{attrs:{title:"查看班级"}},t._l(t.User.classes,function(e,n){return o("cell",{key:n,attrs:{title:e.name,"is-link":""},nativeOn:{click:function(o){t._intoPage(e)}}})})),t._v(" "),o("group",[o("cell",{attrs:{title:"查看学生",link:{name:"errorClassmate"}}})],1)],1)},tt=[],et={render:Z,staticRenderFns:tt},ot=et,nt=o("VU/8"),at=nt(Q,ot,!1,null,null,null);e.default=at.exports}});