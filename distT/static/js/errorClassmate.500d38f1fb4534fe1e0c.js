webpackJsonp([91],{eSYa:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};r.d(n,"errorClassmate",function(){return s}),r.d(n,"errorList",function(){return m}),r.d(n,"errorComment",function(){return l});var o={};r.d(o,"getError",function(){return h}),r.d(o,"setErrorType",function(){return p}),r.d(o,"setErrorScroll",function(){return _}),r.d(o,"clearError",function(){return S}),r.d(o,"getErrorClassmate",function(){return C}),r.d(o,"getErrorComment",function(){return b}),r.d(o,"setErrorComment",function(){return I}),r.d(o,"clearErrorComment",function(){return T}),r.d(o,"setErrorClassmateScroll",function(){return g}),r.d(o,"clearErrorClassmate",function(){return M});var a,u=r("Dd8w"),c=r.n(u),i=r("bOdI"),d=r.n(i),s=function(t){return t.classmate},m=function(t){return t.error},l=function(t){return t.comment},R=r("//Fk"),f=r.n(R),E=r("YEn3"),O=r("7+uW"),h=function(t,e){var r=t.rootState,n=t.commit,o=t.state;return new f.a(function(t,a){Object(E.a)({method:"get",url:"error/list",params:{offset:o.error.offset,token:r.common.user.token,subject_id:e.subjectId,studentId:r.route.params.studentId}}).then(function(r){n("ERROR",{subjectId:e.subjectId,data:r.data.data}),t(r)}).catch(function(t){a(t)})})},p=function(t,e){var r=t.rootState,n=t.commit;t.state;return new f.a(function(t,o){Object(E.a)({method:"post",url:"error/type",data:{token:r.common.user.token,studentId:r.route.params.studentId,wbeid:e.wbeid,chapterId:e.chapterId,type:e.type}}).then(function(r){n("ERROR_ERROR_TYPE",{index:e.index,type:e.type}),t(r)}).catch(function(t){o(t)})})},_=function(t,e){(0,t.commit)("ERROR_SCROLL",{height:e})},S=function(t){t.rootState;(0,t.commit)("ERROR_RELOAD")},C=function(t,e){var r=t.rootState,n=t.commit;t.state;return new f.a(function(t,e){Object(E.a)({method:"get",url:"class/classmate/all",params:{token:r.common.user.token}}).then(function(e){n("ERROR_CLASSMATE",{data:e.data.data}),t(e)}).catch(function(t){e(t)})})},b=function(t,e){var r=t.rootState,n=t.commit;t.state;return O.default.$vux.loading.show({text:"请稍候"}),new f.a(function(t,e){Object(E.a)({method:"get",url:"error/getComment",params:{token:r.common.user.token,studentId:r.route.params.studentId,wbeid:r.route.params.wbeid,chapterId:r.route.params.chapterId}}).then(function(e){n("ERROR_COMMENT",{data:e.data.data}),O.default.$vux.loading.hide(),t(e)}).catch(function(t){O.default.$vux.loading.hide(),e(t)})})},I=function(t,e){var r=t.rootState,n=t.commit;t.state;return O.default.$vux.loading.show({text:"请稍候"}),new f.a(function(t,o){var a=plus.uploader.createUpload("https://www.guinaben.com/teacher/error/comment",{method:"POST"},function(e,a){200===a?(O.default.$vux.loading.hide(),n("ERROR_COMMENT_POST",{index:r.route.query.index}),t(e)):(O.default.$vux.loading.hide(),alert("Upload failed: "+a),o(a))});a.addFile(e.audio,{key:"audio"}),a.addData("studentId",r.route.params.studentId),a.addData("wbeid",r.route.params.wbeid+""),a.addData("token",r.common.user.token),a.addData("content",e.content),a.addData("chapterId",r.route.params.chapterId),a.start()})},T=function(t){(0,t.commit)("ERROR_COMMENT_RESET")},g=function(t,e){(0,t.commit)("ERROR_CLASSMATE_SCROLL",{height:e})},M=function(t){(0,t.commit)("ERROR_CLASSMATE_RELOAD")},v={classmate:{list:[],scroll:0},error:{list:[],subjectId:2,offset:"",scroll:0},comment:{content:"",audio:""}},w=(a={},d()(a,"ERROR_CLASSMATE",function(t,e){t.classmate.list=e.data}),d()(a,"ERROR_CLASSMATE_SCROLL",function(t,e){t.classmate.scroll=e.height}),d()(a,"ERROR_CLASSMATE_RELOAD",function(t){t.classmate.list=[],t.classmate.scroll=0}),d()(a,"ERROR",function(t,e){t.error.offset=e.data.offset,t.error.subjectId=e.subjectId,t.error.list?t.error.list=t.error.list.concat(e.data.list):t.error.list=t.error.list}),d()(a,"ERROR_SCROLL",function(t,e){t.error.scroll=e.height}),d()(a,"ERROR_RELOAD",function(t,e){t.error.list=[],t.error.offset="",t.error.scroll=0,t.error.subjectId=2}),d()(a,"ERROR_ERROR_TYPE",function(t,e){t.error.list[e.index].errorType=Number(e.type)}),d()(a,"ERROR_COMMENT",function(t,e){t.comment.audio=e.data.audioUrl,t.comment.content=e.data.content}),d()(a,"ERROR_COMMENT_RESET",function(t){t.comment.audio="",t.comment.content=""}),d()(a,"ERROR_COMMENT_POST",function(t,e){t.error.list[e.index].comment=!0}),a),L={state:v,mutations:w,getters:n,actions:o},A=r("olkN"),k={name:"errorClassmate",beforeCreate:function(){A.a.registerModule(["statistics","classmate"],c()({},L))}},x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("keep-alive",[r("router-view")],1)},j=[],y={render:x,staticRenderFns:j},D=y,N=r("VU/8"),$=N(k,D,!1,null,null,null);e.default=$.exports}});